<mat-form-field appearance="fill">
  <mat-label>Table fields</mat-label>
  <mat-select [formControl]="tableFieldsControl" multiple>
    <mat-select-trigger>
      {{tableFieldsControl.value[0] || ''}}
      <span *ngIf="(tableFieldsControl.value.length || 0) > 1" class="example-additional-selection">
        (+{{(tableFieldsControl.value.length || 0) - 1}} {{tableFieldsControl.value.length === 2 ? 'other' : 'others'}})
      </span>
    </mat-select-trigger>
    <mat-option *ngFor="let field of tableFields" [value]="field">{{field}}</mat-option>
  </mat-select>
</mat-form-field>

<table class="table">
  <thead class="table-headers">
  <tr>
    <th
      class="thTable-header"
      [attr.data-sortheadervalue]="header"
      *ngFor="let header of tableFieldsControl.value; let i = index ">
      <app-table-header
        [field] = "header"
        (onSort)="sortBy($event)"
      ></app-table-header>
    </th>

<!--    <th-->
<!--      #headerEl-->
<!--      class="thTable-header"-->
<!--      (click)="sortBy($event.currentTarget)"-->
<!--      [attr.data-sortheadervalue]="header"-->
<!--      *ngFor="let header of tableFieldsControl.value; let i = index ">-->
<!--      <app-table-header></app-table-header>-->
<!--      <div class="table-header" >-->
<!--        <span> {{header | uppercase}}</span>-->
<!--        <div class="sort-arrows">-->
<!--          <span [ngClass]="headerEl.dataset['sortbyvalue'] === 'up' ? 'black' : 'grey' ">▲</span>-->
<!--          <span [ngClass]="headerEl.dataset['sortbyvalue'] === 'down' ? 'black' : 'grey' ">▼</span>-->
<!--        </div>-->
<!--      </div>-->
<!--    </th>-->

  </tr>
  </thead>
  <tbody class="table-body">
  <tr *ngFor="let item of tableData">
    <td *ngFor="let itemParam of tableFieldsControl.value; let i = index">{{item[itemParam]}}</td>
  </tr>
  </tbody>
</table>

